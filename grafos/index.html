<HTML>
<head>
  <title>Health Sciences Network Graph</title>
  <script src="https://unpkg.com/sigma@2.4.0/build/sigma.min.js"></script>
  <script src="https://unpkg.com/graphology@0.25.0/dist/graphology.umd.min.js"></script>
  <style>
    body { font-family: Inter, Arial, sans-serif; background: #fff; margin: 0; }
    #container { width: 100vw; height: 100vh; }
    h1 { color: #2563EB; font-size: 2rem; margin: 0.5em 1em; }
    .legend { position: absolute; top: 1em; right: 2em; background: #fff; border: 1px solid #E5E7EB; border-radius: 8px; padding: 1em; font-size: 1rem; box-shadow: 0 2px 8px #0001; }
    .legend span { display: inline-block; width: 1em; height: 1em; margin-right: 0.5em; border-radius: 50%; vertical-align: middle; }
  </style>
</head>
<body>
  <h1>Health Sciences Network Graph</h1>
  <div id="container"></div>
  <div class="legend">
    <div><span style="background:#2563EB"></span>Field</div>
    <div><span style="background:#24EB84"></span>Subfields</div>
    <div><span style="background:#B2EB24"></span>Keyword</div>
    <div><span style="background:#D324EB"></span>Domain</div>
  </div>
  <script>
    // Color mapping by type
    const typeColors = {
      'Field': '#2563EB',
      'Subfields': '#24EB84',
      'Keyword': '#B2EB24',
      'Domain': '#D324EB'
    };
    // Load the graph data
    fetch('data/graph.json')
      .then(response => response.json())
      .then(data => {
        // Build the graphology graph
        const graph = new window.graphology.Graph();
        data.nodes.forEach(node => {
          graph.addNode(node.id, {
            label: node.label,
            size: node.size,
            color: typeColors[node.type] || '#B2EB24',
            x: Math.random() * 100,
            y: Math.random() * 100
          });
        });
        data.edges.forEach(edge => {
          graph.addEdge(edge.source, edge.target, {
            label: edge.label,
            size: edge.size,
            color: '#E5E7EB'
          });
        });
        // Render with Sigma
        const container = document.getElementById('container');
        const renderer = new window.sigma.Sigma(graph, container, {
          renderEdgeLabels: false,
          zIndex: true,
          allowInvalidContainer: false,
          minCameraRatio: 0.05,
          maxCameraRatio: 10,
          labelFont: 'Inter',
          labelSize: 16,
          defaultNodeColor: '#2563EB',
          defaultEdgeColor: '#E5E7EB',
        });
      });
  </script>
</body>
</HTML>